function enablePushUI(){var pushCancelled=parseInt(localStorage.getItem("pushCancelled"));(null==pushCancelled||isNaN(pushCancelled))&&($(".pushNotificationsInOpt").css("display","block"),$(".pushNotificationsInOpt").is(":visible")&&dataLayer.push({nd1:"Recibir notificaciones",nd2:"Aviso",nd3:"Visualización",nd4:"",event:"clicGeneral"}))}function disabledPushUI(){$(".pushNotificationsInOpt").css("display","none")}function fcmSubscribe(){dataLayer.push({nd1:"Recibir notificaciones",nd2:"Permisos",nd3:"Visualización",nd4:"",event:"clicGeneral"}),messaging.requestPermission().then((function(){console.log("Notification permission granted."),messaging.getToken().then((function(currentToken){currentToken?sendSubscriptionToServer(currentToken):console.log("No Instance ID token available. Request permission to generate one.")})).catch((function(err){console.log("An error occurred while retrieving token. ",err)}))})).catch((function(err){dataLayer.push({nd1:"Recibir notificaciones",nd2:"Permisos",nd3:"Bloquear",nd4:"",event:"clicGeneral"}),console.log("Unable to get permission to notify.",err)}))}function sendSubscriptionToServer(subscription){const topic="General",urlSubscription=`https://iid.googleapis.com/iid/v1/${subscription}/rel/topics/General`;$.ajax({type:"POST",url:urlSubscription,headers:{"Content-Type":"application/json",Authorization:"key=AIzaSyAzE5cEfz2XOR_MfABfjzoJHH8n5pK7mww"},success:function(data){console.log("Subscription sent to server"),dataLayer.push({nd1:"Recibir notificaciones",nd2:"Permisos",nd3:"Permitir",nd4:"",event:"clicGeneral"})},error:function(err){console.log(`Error: ${err}`)}})}function acceptPushNotification(){dataLayer.push({nd1:"Recibir notificaciones",nd2:"Aviso",nd3:"Suscribirme",nd4:"",event:"clicGeneral"}),fcmSubscribe(),$(".pushNotificationsInOpt").css("display","none")}function rejectPushNotification(){dataLayer.push({nd1:"Recibir notificaciones",nd2:"Aviso",nd3:"Ahora no",nd4:"",event:"clicGeneral"}),$(".pushNotificationsInOpt").css("display","none"),localStorage.setItem("pushCancelled",1)}function closePushNotification(){dataLayer.push({nd1:"Recibir notificaciones",nd2:"Aviso",nd3:"Ahora no",nd4:"",event:"clicGeneral"}),$(".pushNotificationsInOpt").css("display","none"),localStorage.setItem("pushCancelled",1)}function closeMessageAPP(){let prompt=document.getElementById("prompt");console.log("closeMessageAPP"),prompt.style.display="none",disableA2HS(),fcmSubscribe(),dataLayer.push({nd1:"Add to homescreen",nd2:"Dismiss",nd3:"",nd4:"",event:"clicGeneral"})}initialiseState();